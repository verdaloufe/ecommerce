<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>E-commerce Site - Accueil</title>
    <meta name="description" content="Site e-commerce avec produits variés, catégories, et suivi de commandes.">
    <meta name="keywords" content="e-commerce, produits, catégories, profil, commandes">
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <header class="header">
        <div class="header-left">
            <a href="index.html" aria-label="Accueil" class="logo-link">
                <div class="logo">
                    <div class="logo-circle logo-orange"></div>
                    <div class="logo-circle logo-blue"></div>
                </div>
            </a>
            <button id="menu-toggle" class="menu-button">
                <span class="hamburger-icon"></span>
                <span class="menu-text">MENU</span>
            </button>
        </div>
        <div class="header-center">
            <div class="search-container">
                <input type="search" id="search-bar" placeholder="Cherchez par mot clé (exemple : poulet)" class="search-input">
                <button class="search-button" aria-label="Rechercher">
                    <svg width="16" height="16" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <path d="M21 21L16.514 16.506L21 21ZM19 10.5C19 15.194 15.194 19 10.5 19C5.806 19 2 15.194 2 10.5C2 5.806 5.806 2 10.5 2C15.194 2 19 5.806 19 10.5Z" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                    </svg>
                </button>
            </div>
        </div>
        <div class="header-right">
            <div id="cart-header" class="cart-header">
                <button id="cart-button" class="cart-button" aria-label="Panier">
                    <svg width="20" height="20" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <path d="M6 6H21L20 12H8L6 6Z" stroke="currentColor" stroke-width="1.6" stroke-linecap="round" stroke-linejoin="round"/>
                        <circle cx="10" cy="19" r="1" fill="currentColor"/>
                        <circle cx="18" cy="19" r="1" fill="currentColor"/>
                    </svg>
                    <span id="cart-count" class="cart-count">0</span>
                </button>
            </div>
            <button id="profile-button" aria-label="Profil" class="profile-button">
                <span id="profile-initial">1</span>
            </button>
        </div>
    </header>

    <section class="hero-section">
        <div class="hero-content">
            <h1 class="hero-title">
                <span class="brand-name">Ecomalin</span>,
                <span class="tagline"><span class="grossiste">grossiste</span> alimentaire, produits <span class="professionnels">professionnels</span>, le frais en <span class="highlight">GROS</span> pour tous</span>
            </h1>
            <div class="location-info">
                <svg class="location-icon" width="16" height="16" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <path d="M21 10C21 17 12 23 12 23S3 17 3 10C3 5 7 1 12 1S21 5 21 10Z" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                    <circle cx="12" cy="10" r="3" stroke="currentColor" stroke-width="2"/>
                </svg>
                <span>Notre magasin se trouve à Saint-Jean d'Angely en Charentes maritimes</span>
            </div>
        </div>
    </section>

    <!-- Menu overlay -->
    <div id="menu-overlay" class="menu-overlay hidden"></div>

    <!-- Cart sidebar (floating panel from right) -->
    <aside id="cart-sidebar" class="cart-sidebar hidden">
        <div class="cart-sidebar-header">
            <h3>Mon panier</h3>
            <button id="cart-sidebar-close" class="cart-sidebar-close-btn" aria-label="Fermer le panier">
                <svg width="20" height="20" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <path d="M18 6L6 18M6 6L18 18" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                </svg>
            </button>
        </div>
        <div id="cart-sidebar-content" class="cart-sidebar-content">
            <!-- Cart content will be injected here -->
        </div>
    </aside>

    <nav id="left-menu" class="hidden">
        <div class="menu-header">
            <h3 style="color:white;margin:0;">Menu</h3>
            <button id="menu-close" class="menu-close-btn" aria-label="Fermer le menu">
                <svg width="20" height="20" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <path d="M18 6L6 18M6 6L18 18" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                </svg>
            </button>
        </div>
        <div class="menu-categories" style="padding:1rem;">
            <h4 style="color:white;margin-bottom:1rem;font-size:1.1rem;">Catégories</h4>
            <div id="menu-category-list" class="menu-category-list">
                <!-- Les catégories seront injectées ici -->
            </div>
        </div>
    </nav>
    <main>
        <div id="category-view">
            <section id="categories">
                <div class="categories-header">
                    <div class="categories-icon">
                        <svg width="32" height="32" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                            <path d="M6 18H18V16H6V18ZM6 13H18V11H6V13ZM6 6V8H18V6H6ZM20 3H4C3.45 3 3 3.45 3 4V20C3 20.55 3.45 21 4 21H20C20.55 21 21 20.55 21 20V4C21 3.45 20.55 3 20 3ZM20 20H4V4H20V20Z" fill="currentColor"/>
                        </svg>
                    </div>
                    <h2 class="categories-title">Explorez et trouvez le produit idéal dans nos <span class="categories-highlight">Catégories</span></h2>
                </div>
                <div class="category-grid">
                    <!-- Les catégories seront chargées dynamiquement -->
                </div>
            </section>
            
            <section id="products">
                <!-- Les produits seront chargés dynamiquement via JavaScript -->
            </section>
        </div>
        
        <div id="category-products-view" style="display: none;">
            <div class="back-header">
                <button id="back-button">
                    <svg width="16" height="16" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <path d="M15 18L9 12L15 6" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                    </svg>
                    <span id="back-button-text">Retour</span>
                </button>
                <h2 id="category-title">Produits de la catégorie</h2>
            </div>
            <section id="category-products">
                <!-- Les produits de la catégorie seront chargés ici -->
            </section>
        </div>
        
        <div id="search-results-view" style="display: none;">
            <div class="back-header">
                <button id="back-search-button">← Retour</button>
                <h2 id="search-title">Résultats de recherche</h2>
            </div>
            <section id="search-products">
                <!-- Les résultats de recherche seront chargés ici -->
            </section>
        </div>
    </main>
    <footer>
        <p>&copy; 2023 @ecomalin.net</p>
    </footer>

    <!-- Cart preview modal (quick view from header) -->
    <div id="cart-preview-modal" class="cart-preview-modal hidden" aria-hidden="true" role="dialog" aria-label="Aperçu du panier">
        <div class="cart-preview-overlay" data-close="true"></div>
        <div class="cart-preview-content">
            <div class="cart-preview-header">
                <h4>Mon panier</h4>
                <button id="cart-preview-close" aria-label="Fermer">✕</button>
            </div>
            <div id="cart-preview-items" class="cart-preview-items">
                <!-- Items will be injected here -->
            </div>
            <div class="cart-preview-footer">
                <div class="cart-preview-total">
                    <span>Total :</span>
                    <strong id="cart-preview-total-amount">€0,00</strong>
                </div>
                <div class="cart-preview-actions">
                    <button id="cart-preview-checkout" class="btn-primary">Commander</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Cart modal (hidden by default) -->
    <div id="cart-modal" class="modal hidden" style="display:none" aria-hidden="true" role="dialog" aria-label="Panier">
        <div class="modal-overlay" data-close="true"></div>
        <div class="modal-content">
            <header class="modal-header">
                <h3>Votre panier</h3>
                <button id="cart-close" aria-label="Fermer">✕</button>
            </header>
            <section id="cart-items">
                <!-- Items will be injected here -->
            </section>
            <footer class="modal-footer">
                <div class="cart-total">
                    <span>Total :</span>
                    <strong id="cart-total-amount">€0,00</strong>
                </div>
                <div class="cart-actions">
                    <button id="cart-clear" class="btn-secondary">Vider le panier</button>
                    <button id="cart-checkout" class="btn-primary">Passer à la caisse</button>
                </div>
            </footer>
        </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
    <script src="supabase-config.js"></script>
    <script src="script.js"></script>
</body>
</html>